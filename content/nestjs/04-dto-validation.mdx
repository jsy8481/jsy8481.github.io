---
title: "04. DTOì™€ ê²€ì¦"
description: "ì•ˆì „í•œ ë°ì´í„° í†µì‹ ì˜ í•µì‹¬ì¸ DTO(Data Transfer Object)ì™€ íŒŒì´í”„ë¥¼ í™œìš©í•œ ê°•ë ¥í•œ ìœ íš¨ì„± ê²€ì‚¬ ê¸°ë²•ì„ ë°°ì›ë‹ˆë‹¤."
date: "2026-02-26"
---

# ğŸ·ï¸ 04. DTOì™€ ê²€ì¦ â€” ì“°ë ˆê¸° ë°ì´í„°ëŠ” ì…êµ¬ ì»· (Garbage In, Error Out)

## ğŸ“‹ ëª©ì°¨
- [ğŸ“Œ ì´ ë¬¸ì„œë¥¼ ì½ê¸° ì „ì—](#-ì´-ë¬¸ì„œë¥¼-ì½ê¸°-ì „ì—)
- [ğŸ¤” ì™œ ì•Œì•„ì•¼ í•˜ëŠ”ê°€](#-ì™œ-ì•Œì•„ì•¼-í•˜ëŠ”ê°€)
- [ğŸ—ï¸ ë¹„ìœ ë¡œ ë¨¼ì € ì´í•´í•˜ê¸°](#-ë¹„ìœ ë¡œ-ë¨¼ì €-ì´í•´í•˜ê¸°)
- [ğŸ§© DTOì™€ class-validator â€” ì² í†µ ë³´ì•ˆ ë¬¸ì§€ê¸° ğŸŸ¡](#-dtoì™€-class-validator--ì² í†µ-ë³´ì•ˆ-ë¬¸ì§€ê¸°-)
- [ğŸ§© ë‚´ì¥ íŒŒì´í”„ì™€ ìœ í‹¸ë¦¬í‹° ğŸŸ¢](#-ë‚´ì¥-íŒŒì´í”„ì™€-ìœ í‹¸ë¦¬í‹°-)
- [ğŸ§ª ë”°ë¼í•´ë³´ê¸°: ì‹¤ì „ íšŒì›ê°€ì… DTO ê¹ì•„ë³´ê¸°](#-ë”°ë¼í•´ë³´ê¸°-ì‹¤ì „-íšŒì›ê°€ì…-dto-ê¹ì•„ë³´ê¸°)
- [ğŸ’¼ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì™€ ì‹¤ë¬´ íŒ](#-ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤ì™€-ì‹¤ë¬´-íŒ)
- [ğŸ’¥ ì—ëŸ¬ í•´ê²° ì¹´íƒˆë¡œê·¸](#-ì—ëŸ¬-í•´ê²°-ì¹´íƒˆë¡œê·¸)
- [ğŸ—‚ï¸ ì¹˜íŠ¸ì‹œíŠ¸](#ï¸-ì¹˜íŠ¸ì‹œíŠ¸)
- [ğŸ“ ë§ˆë¬´ë¦¬ í€´ì¦ˆ](#-ë§ˆë¬´ë¦¬-í€´ì¦ˆ)

---

## ğŸ“Œ ì´ ë¬¸ì„œë¥¼ ì½ê¸° ì „ì—

**â±ï¸ ì˜ˆìƒ ì½ê¸° ì‹œê°„:** 15ë¶„

**ğŸ§³ ì „ì œ ì§€ì‹ ì²´í¬ë¦¬ìŠ¤íŠ¸**
- [ ] ë°ì½”ë ˆì´í„°(`@`) ë¬¸ë²•ì˜ ê¸°ë³¸ í˜•íƒœë¥¼ ì•ˆë‹¤.
- [ ] 02ì¥ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ HTTP ë³¸ë¬¸ì„ ê°€ì ¸ì˜¤ëŠ” `@Body()` ì‚¬ìš©ë²•ì„ ë³´ì•˜ë‹¤.

**ğŸ—ºï¸ ì´ ë¬¸ì„œì˜ íë¦„**
ë°ì´í„° ê²€ì¦ì˜ í•„ìš”ì„± â†’ `class-validator` ì„¤ì •ê³¼ ì‚¬ìš©ë²• â†’ íŒŒì´í”„(Pipe)ë¡œ í˜•ë³€í™˜í•˜ê¸° â†’ ìµœì‹  ë°©ì‹ì¸ Zod ì—°ë™ â†’ ìì£¼ ê²ªëŠ” ì—ëŸ¬

**ğŸ¯ ì´ ë¬¸ì„œë¥¼ ë‹¤ ì½ìœ¼ë©´ í•  ìˆ˜ ìˆëŠ” ê²ƒ**
- [ ] í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë°ì´í„°ê°€ ìˆ«ìì¸ì§€, ì´ë©”ì¼ í˜•ì‹ì¸ì§€ 100% ë³´ì¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
- [ ] ë¶ˆí•„ìš”í•œ/ì•…ì˜ì ì¸ í•„ë“œ(`admin: true` ë“±)ë¥¼ ì„œë²„ ì…êµ¬ì—ì„œ ìë™ìœ¼ë¡œ ê±¸ëŸ¬ë‚¼ ìˆ˜ ìˆë‹¤.
- [ ] Zod ìŠ¤í‚¤ë§ˆë¥¼ ì´ìš©í•´ DB ëª¨ë¸ê³¼ ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•˜ëŠ” DTOë¥¼ ë½‘ì•„ë‚¼ ìˆ˜ ìˆë‹¤.

---

## ğŸ¤” ì™œ ì•Œì•„ì•¼ í•˜ëŠ”ê°€

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì•„ë¬´ë¦¬ í¼(Form) ê²€ì¦ì„ ë¹¡ì„¸ê²Œ í•´ë†”ë„, í•´ì»¤ë‚˜ ì•…ì„± ë´‡ì€ Postman ê°™ì€ íˆ´ë¡œ ì„œë²„ APIì— ì§ì ‘ ì´ìƒí•œ ë¬¸ìì—´ì„ ê½‚ì•„ ë„£ì–´.
ë§Œì•½ ë‚˜ì´(age) í•„ë“œì— `{"age": "ë°±ì‚´"}` ì´ë¼ëŠ” ë¬¸ìì—´ì´ ê·¸ëŒ€ë¡œ DBì— ë“¤ì–´ê°€ë ¤ê³  í•œë‹¤ë©´? ì„œë²„ê°€ ë»—ê±°ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì˜¤ì—¼ë˜ê² ì§€?
DTOì™€ íŒŒì´í”„ëŠ” ì´ëŸ° **"ì¹˜ëª…ì ì¸ ì“°ë ˆê¸° ë°ì´í„°"ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë„ì°©í•˜ê¸°ë„ ì „ì— ê°€ì°¨ ì—†ì´ ì³ë‚´ëŠ” ë°©ì–´ë§‰**ì´ì•¼.

---

## ğŸ—ï¸ ë¹„ìœ ë¡œ ë¨¼ì € ì´í•´í•˜ê¸°

> ğŸ§’ **5ì‚´ì—ê²Œ ì„¤ëª…í•œë‹¤ë©´?**
> **DTO (Data Transfer Object)** ëŠ” ê¹ê¹í•œ **ê³ ê¸‰ í´ëŸ½ì˜ ì…ì¥ ì œí•œ ê·œì¹™í‘œ**ì•¼.
> "ë‚˜ì´ëŠ” ìˆ«ìì—¬ì•¼ í•´. ì´ë¦„ì€ ë¬´ì¡°ê±´ 2ê¸€ì ì´ìƒì´ì–´ì•¼ í•´. ì´ë©”ì¼ í˜•ì‹ ì•„ë‹ˆë©´ ì…êµ¬ ì»·!"
> 
> **ValidationPipe (ìœ íš¨ì„± ê²€ì‚¬ íŒŒì´í”„)** ëŠ” ê·¸ ê·œì¹™í‘œë¥¼ ë“¤ê³  ì„œ ìˆëŠ” ë©ì¹˜ í° **ê¸°ë„(ë¬¸ì§€ê¸°)** ì•¼. 
> ì†ë‹˜(Request)ì´ ì˜¤ë©´ ì‹ ë¶„ì¦(Body ë°ì´í„°)ì„ ì«™ í›‘ì–´ë³´ê³ , ê·œì¹™í‘œì— í•˜ë‚˜ë¼ë„ ì–´ê¸‹ë‚˜ë©´ "ëŒì•„ê°€ë¼(400 Bad Request)" í•˜ê³  ë¬¸ì „ë°•ëŒ€í•´ë²„ë ¤. ë•ë¶„ì— í´ëŸ½ ì•ˆ(ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤)ì€ í•­ìƒ ë¬¼ì´ ê¹¨ë—í•˜ì§€!

---

## ğŸ§© DTOì™€ class-validator â€” ì² í†µ ë³´ì•ˆ ë¬¸ì§€ê¸° ğŸŸ¡

> ğŸ¯ **ì´ ì„¹ì…˜ì„ ì½ê³  ë‚˜ë©´:** 
> - ì „ì—­ íŒŒì´í”„ `useGlobalPipes`ì˜ í•„ìˆ˜ ì„¤ì • 3ê°€ì§€ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.
> - `@Is...` ê³„ì—´ ë°ì½”ë ˆì´í„°ë¥¼ ììœ ë¡­ê²Œ ì¡°í•©í•  ìˆ˜ ìˆë‹¤.

> ğŸ¤” **ì ê¹, ë¨¼ì € ìƒê°í•´ë´**
> TypeScriptëŠ” ì»´íŒŒì¼ íƒ€ì„ì—ë§Œ ì‘ë™í•´. ì‹¤í–‰ ì¤‘(ëŸ°íƒ€ì„)ì— í´ë¼ì´ì–¸íŠ¸ê°€ ëª°ë˜ JSONì„ ë³´ë‚´ë©´ TypeScriptì˜ `interface`ëŠ” ê·¸ê±¸ ë§‰ì•„ì¤„ ìˆ˜ ìˆì„ê¹Œ?
> (ì •ë‹µ: ëª» ë§‰ì•„! ê·¸ë˜ì„œ ëŸ°íƒ€ì„ì— ì‚´ì•„ë‚¨ëŠ” `class`ì™€ ë°ì½”ë ˆì´í„°ë¥¼ ì“°ëŠ” ê±°ì•¼.)

### 1ë‹¨ê³„: ì „ì—­ ê¸€ë¡œë²Œ íŒŒì´í”„(ê¸°ë„) ì„¸ìš°ê¸°
í”„ë¡œì íŠ¸ ì „ì²´ì— ë‹¨ í•œ ë²ˆë§Œ ì„¤ì •í•˜ë©´ ë¼. (`main.ts`)

```typescript
import { ValidationPipe } from '@nestjs/common';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  app.useGlobalPipes(new ValidationPipe({
    whitelist: true,            // 1. ê·œì¹™í‘œì— ì—†ëŠ” ì†ì„±ì€ ìŠ¤ìœ½ ë¬´ì‹œ/ì‚­ì œí•´ë²„ë¦¼ (í•µì‹¬ ë³´ì•ˆ!)
    forbidNonWhitelisted: true, // 2. ê·œì¹™í‘œì— ì—†ëŠ” ê±¸ ë³´ë‚´ë©´ ì•„ì˜ˆ 400 ì—ëŸ¬ë¥¼ ë±‰ìŒ (ì„ íƒ)
    transform: true,            // 3. ë¬¸ìì—´ "1"ì„ ì•Œì•„ì„œ ìˆ«ì 1ë¡œ ë°”ê¿”ì¤Œ (ê°œê¿€ ê¸°ëŠ¥)
  }));
  
  await app.listen(3000);
}
```

### 2ë‹¨ê³„: DTO í´ë˜ìŠ¤(ê·œì¹™í‘œ) ë§Œë“¤ê¸°
í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ê³ (`npm i class-validator class-transformer`), 
ë§ˆìë§‰ìœ¼ë¡œ DTO í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë°ì½”ë ˆì´í„°ë¥¼ ë•ì§€ë•ì§€ ë¶™ì—¬ì£¼ë©´ ë!

```typescript
import { IsEmail, IsString, Length, IsOptional, Min } from 'class-validator';

export class CreateUserDto {
  @IsEmail({}, { message: 'ì œëŒ€ë¡œ ëœ ì´ë©”ì¼ì„ ì ì–´ì£¼ì„¸ìš”!' })
  email: string;

  @IsString()
  @Length(2, 20)
  name: string;

  @IsOptional()  // ğŸ‘ˆ ì•ˆ ë³´ë‚´ë„ ìƒê´€ì—†ë‹¤ëŠ” ëœ»!
  @Min(14, { message: '14ì„¸ ì´ìƒë§Œ ê°€ì… ê°€ëŠ¥í•©ë‹ˆë‹¤.' })
  age?: number;
}
```

ì´ì œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ `@Body() dto: CreateUserDto` ë¼ê³  ì ê¸°ë§Œ í•˜ë©´, ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ ì½”ë“œë¶€í„°ëŠ” `dto.age`ê°€ **100% ì™„ë²½í•œ ìˆ«ìí˜•ì´ê±°ë‚˜, ì•„ë‹ˆë©´ ì•„ì˜ˆ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒ**ì„ ë§˜ ë†“ê³  í™•ì‹ í•  ìˆ˜ ìˆì–´.

---

## ğŸ§© ë‚´ì¥ íŒŒì´í”„ì™€ ìœ í‹¸ë¦¬í‹° ğŸŸ¢

ë³µì¡í•œ ê°ì²´ ë©ì–´ë¦¬(`@Body`)ëŠ” DTOì™€ `class-validator`ê°€ ì²˜ë¦¬í•´ ì£¼ì§€ë§Œ, ë‹¨ìˆœí•œ URL ë³€ìˆ˜(`@Param`, `@Query`) ê²€ì‚¬ì—ëŠ” **ë‚´ì¥ íŒŒì´í”„(Built-in Pipe)** ê°€ ìµœê³ ì•¼.

### ëŒ€í‘œì ì¸ ë‚´ì¥ íŒŒì´í”„ 4ê°€ì§€

1. **`ParseIntPipe`**: ë¬¸ìì—´ì„ ë¬´ì¡°ê±´ ì •ìˆ˜ë¡œ ë°”ê¿ˆ. ì‹¤íŒ¨í•˜ë©´ 400 ì—ëŸ¬!
   ```typescript
   @Get(':id')
   findOne(@Param('id', ParseIntPipe) id: number) {}
   ```
2. **`ParseBoolPipe`**: "true", "false", "1", "0" ë“±ì„ ê¹”ë”í•œ ë¶ˆë¦¬ì–¸ íƒ€ì…ìœ¼ë¡œ.
3. **`ParseUUIDPipe`**: ë¬¸ìì—´ì´ UUID í¬ë§·ì¸ì§€ ê¹ê¹í•˜ê²Œ ê²€ì¦.
4. **`DefaultValuePipe`**: ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì´ ì•ˆ ë„˜ì–´ì™”ì„ ë•Œ ê¸°ë³¸ê°’ ì„¸íŒ….
   ```typescript
   @Query('page', new DefaultValuePipe(1), ParseIntPipe) page: number
   ```

### Mapped Types (ì½”ë“œ ë³µë¶™ ë°©ì§€ê¸°)
íšŒì›ê°€ì… ìš© DTO(`CreateDto`)ê°€ ìˆëŠ”ë°, ì •ë³´ ìˆ˜ì • ìš© DTO(`UpdateDto`)ë¥¼ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ, ë‚´ìš©ë¬¼ì„ ë˜ ë‹¤ ë³µë¶™í•´ì•¼ í• ê¹Œ? NO!

```typescript
import { PartialType } from '@nestjs/mapped-types';

// UpdateDtoëŠ” CreateDtoì™€ ë˜‘ê°™ì§€ë§Œ, ëª¨ë“  í•„ë“œê°€ 'ì„ íƒ(Optional)'ìœ¼ë¡œ ë°”ë€œ!
export class UpdateUserDto extends PartialType(CreateUserDto) {}
```
ì´ ì™¸ì—ë„ í•„ë“œ ì¼ë¶€ë§Œ ê°€ì ¸ì˜¤ëŠ” `PickType`, ì¼ë¶€ë§Œ ë²„ë¦¬ëŠ” `OmitType` ë“± ê°•ë ¥í•œ ìƒì† ê¸°ëŠ¥ì´ ì œê³µë¼.

---

## ğŸ§ª ë”°ë¼í•´ë³´ê¸°: ì‹¤ì „ íšŒì›ê°€ì… DTO ê¹ì•„ë³´ê¸°

ìš”ì¦˜ ëŒ€ì„¸ì¸ **Zod** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ ë³¼ ê±°ì•¼. 
NestJSì˜ ì „í†µì ì¸ `class-validator` ëŒ€ì‹ , Drizzle ìŠ¤í‚¤ë§ˆì™€ 100% í˜¸í™˜ë˜ëŠ” `nestjs-zod`ë¥¼ ì‚¬ìš©í•˜ëŠ” í˜„ëŒ€ì ì¸ ë°©ì‹ì´ì§€!

```typescript
import { createZodDto } from 'nestjs-zod';
import { insertUserSchema } from '@repo/schema'; // Drizzleì—ì„œ ìë™ ìƒì„±í•œ Zod ìŠ¤í‚¤ë§ˆ

// 1. Zod ìŠ¤í‚¤ë§ˆì—ì„œ í•„ìš”í•œ ì†ì„±ë§Œ ì™ ë¹¼ì˜¨ë‹¤ (.pick)
const RegisterSchema = insertUserSchema.pick({
  email: true,
  password: true,
  name: true,
});

// 2. ì•Œì•„ì„œ ì™„ë²½í•œ DTO í´ë˜ìŠ¤ë¡œ ë‘”ê°‘!
export class RegisterDto extends createZodDto(RegisterSchema) {}

// ----- ì»¨íŠ¸ë¡¤ëŸ¬ -----
@Post('register')
async register(@Body() dto: RegisterDto) {
  // dto.email, dto.password, dto.name ìë™ ì™„ì„± ì§€ì›!
  // ë¬´ì¡°ê±´ ê²€ì¦ëœ ì•ˆì „í•œ ë°ì´í„°!
  return this.authService.register(dto);
}
```

**âœ… Drizzle + Zodì˜ ì••ë„ì ì¸ ì¥ì :**
DB í…Œì´ë¸” êµ¬ì¡°(Schema)ë¥¼ ë°”ê¾¸ë©´? Zod ìŠ¤í‚¤ë§ˆë„ ì•Œì•„ì„œ ë°”ë€Œê³ , DTO í´ë˜ìŠ¤ë„ ì•Œì•„ì„œ ë°”ë€Œì–´! í´ë¼ì´ì–¸íŠ¸ë¶€í„° DBê¹Œì§€ **ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(SSOT)** ì´ ì™„ì„±ë˜ëŠ” ì§œë¦¿í•œ ê²½í—˜ì„ í•  ìˆ˜ ìˆì–´.

---

## ğŸ’¼ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì™€ ì‹¤ë¬´ íŒ ğŸŸ¡

### 1. ì „ì—­ `whitelist: true`ëŠ” ëª©ìˆ¨ê³¼ë„ ê°™ë‹¤.
í´ë¼ì´ì–¸íŠ¸ ë§˜ëŒ€ë¡œ `{ "email": "a@a.com", "role": "admin" }` ì´ë ‡ê²Œ `role` í•„ë“œë¥¼ ê°•ì œë¡œ ì‘¤ì…” ë„£ìœ¼ë©´ ê¶Œí•œ íƒˆì·¨ ë²„ê·¸ê°€ í„°ì§ˆ ìˆ˜ ìˆì–´. 
`whitelist: true`ë¥¼ ì¼œë‘ë©´ DTOì— ì í˜€ ìˆì§€ ì•Šì€ í•„ë“œ(role)ëŠ” ë¬¸ì§€ê¸°ê°€ ë¬´ì°¸íˆ ì°ì–´ë²„ë¦¬ê³  ì•ˆì „í•œ ë°ì´í„°ë§Œ í†µê³¼ì‹œì¼œì¤˜.

### 2. ì¤‘ì²©ëœ ê°ì²´ ë°°ì—´ ê²€ì¦
ì‚¬ìš©ìê°€ "ì¥ë°”êµ¬ë‹ˆ ë°°ì—´"ì„ ì „ì†¡í–ˆë‹¤ë©´, ê° ë°°ì—´ ì•„ì´í…œë„ ì¼ì¼ì´ ê²€ì¦í•´ì•¼ í•´.
ì´ë•ŒëŠ” `@ValidateNested()`ê°€ í•„ìˆ˜ì•¼.

```typescript
import { ValidateNested, Type } from 'class-transformer';

class OrderItemDto { ... }

class CreateOrderDto {
  // 1. ì´ê±° ë°°ì—´ì¸ì§€ ê²€ì‚¬
  @IsArray() 
  // 2. ë‚´ë¶€ë¥¼ ìƒ…ìƒ…ì´ ë’¤ì ¸ì¤„ê²Œ!
  @ValidateNested({ each: true }) 
  // 3. ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ëŸ°íƒ€ì„ì— ë°°ì—´ ì•ˆì˜ íƒ€ì…ì„ ëª¨ë¥´ë‹ˆê¹Œ Typeì„ ë‹¬ì•„ì¤˜ì•¼ í•´!
  @Type(() => OrderItemDto) 
  items: OrderItemDto[];
}
```

---

## ğŸ’¥ ì—ëŸ¬ í•´ê²° ì¹´íƒˆë¡œê·¸

> ì—ëŸ¬ ë©”ì‹œì§€ê°€ ëœ¨ë©´ Ctrl+Fë¡œ ê²€ìƒ‰í•´ë´.

### âŒ `Validation failed (numeric string is expected)`

**í˜„ìƒ:**
```json
{ "statusCode": 400, "message": "Validation failed (numeric string is expected)", "error": "Bad Request" }
```

**ì›ì¸:** ì»¨íŠ¸ë¡¤ëŸ¬ íŒŒë¼ë¯¸í„°ì—ì„œ `ParseIntPipe`ë¥¼ ë‹¬ì•„ë†¨ëŠ”ë° í´ë¼ì´ì–¸íŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹Œ ê¸€ì(ì˜ˆ: `?page=abc`)ë¥¼ ë³´ëƒˆê¸° ë•Œë¬¸.

**í•´ê²°ì±…:** 
ë‚´ ì½”ë“œê°€ ì˜ëª»ëœ ê²Œ ì•„ë‹ˆì•¼. ë°©ì–´ì— ì„±ê³µí•œ ê±°ë‹ˆê¹Œ í”„ë¡ íŠ¸ê°œë°œìì—ê²Œ "ìˆ«ìë¡œ ì£¼ì„¸ìš”~" ë¼ê³  ë§í•˜ë©´ ë¼.

### âŒ `property 'nestedObject' should not exist` (whitelist ì—ëŸ¬)

**ì›ì¸:** 
ì „ì—­ ì„¤ì •ì— `whitelist: true`, `forbidNonWhitelisted: true`ê°€ ì¼œì ¸ ìˆëŠ”ë°, DTO ê·œì¹™ì— ëª…ì‹œë˜ì§€ ì•Šì€ ì´ìƒí•œ ì†ì„±ì„ í´ë¼ì´ì–¸íŠ¸ê°€ í˜ì´ë¡œë“œì— ê»´ì„œ ë³´ëƒ„.

**í•´ê²°ì±…:** 
í•„ìš”í•œ ë°ì´í„°ê°€ ë§ë‹¤ë©´ DTO í´ë˜ìŠ¤ì— ì†ì„±ì„ ì¶”ê°€í•´. (ë§Œì•½ êµ³ì´ ê²€ì‚¬í•  í•„ìš” ì—†ëŠ” ììœ í˜•ì‹ ë°ì´í„°ë¼ë©´ `@IsOptional()` ì´ë¼ë„ ë‹¬ì•„ì¤˜ì•¼ í•´)

---

## ğŸ—‚ï¸ ì¹˜íŠ¸ì‹œíŠ¸ â€” ì‹¤ë¬´ ìš”ì•½ ì¹´ë“œ

| ìƒí™© | ë°ì½”ë ˆì´í„° / ì„¤ì • | ì„¤ëª… |
|------|-------------------|------|
| **ë¬¸ìì—´ì˜ ê¸¸ì´ë¥¼ ì œí•œí•˜ê³  ì‹¶ì–´ìš”** | `@Length(2, 10)` | ìµœì†Œ 2, ìµœëŒ€ 10ì |
| **íŠ¹ì • ë¬¸ìì—´ ì…‹ ì¤‘ 1ê°œì—¬ì•¼ í•´ìš”** | `@IsIn(['USER', 'ADMIN'])` | Enum ëŠë‚Œì˜ ê²€ì¦ |
| **ë°°ì—´ì´ ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë¼ìš”** | `@ArrayMinSize(1)` | lengthê°€ ìµœì†Œ 1 ì´ìƒ |
| **ì„ íƒì  ê°’ì´ë¼ ì•ˆ ë“¤ì–´ì™€ë„ ë¼ìš”** | `@IsOptional()` | null, undefined íŒ¨ìŠ¤ |
| **ë³µì¡í•œ ê°ì²´/ë°°ì—´ ë‚´ë¶€ë¥¼ ê²€ì‚¬í• ë˜ìš”** | `@Type(() => Class) `<br/>`@ValidateNested()` | ì´ê²ƒë“¤ì€ ì„¸íŠ¸ë¡œ ë‹¤ë…€ì•¼ ì‘ë™í•¨ |

---

## ğŸ“ ë§ˆë¬´ë¦¬ í€´ì¦ˆ

**Q1. `class-validator`ë¥¼ ì´ìš©í•  ë•Œ ì•„ë˜ ì„¤ì • ì¤‘, í•´ì»¤ê°€ ì•…ì˜ì ì¸ ì‰ì—¬ í•„ë“œ(`isPaid: true` ë“±)ë¥¼ JSONì— ì„ì–´ ë³´ë‚´ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ ë°˜ë“œì‹œ ì¼œì•¼ í•˜ëŠ” ì˜µì…˜ì€?**

```typescript
app.useGlobalPipes(new ValidationPipe({
  __________: true
}));
```

- A) `transform`
- B) `whitelist`
- C) `disableErrorMessages`
- D) `enableCors`

> âœ… **ì •ë‹µ: B**
> **ì„¤ëª…:** `whitelist: true`ëŠ” ë§ˆì¹˜ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸(í—ˆê°€ ëª…ë‹¨) ê¸°ë°˜ ì¶œì… í†µì œì™€ ê°™ì•„. DTOì— ì´ë¦„ì´ ì•ˆ ì í˜€ìˆëŠ” ë°ì´í„° í•„ë“œëŠ” ì¡°ìš©íˆ íê¸°ì²˜ë¶„ í•´ë²„ë ¤!

**Q2. ë¬¸ìì—´ í˜•íƒœì˜ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ `?limit=50` ì„ ìˆ«ìì¸ `50`ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ í˜• ë³€í™˜í•˜ë©´ì„œ ë¤ìœ¼ë¡œ ë¬¸ìì¸ì§€ ì•„ë‹Œì§€ ìœ íš¨ì„± ê²€ì‚¬ê¹Œì§€ ê³µì§œë¡œ í•´ì£¼ëŠ” ë§ˆë²• ê°™ì€ ë‚´ì¥ íŒŒì´í”„ëŠ” ë¬´ì—‡ì¸ê°€?**

> âœ… **ì •ë‹µ:** `ParseIntPipe`
> **ğŸ“Œ í•µì‹¬ ê¸°ì–µë²•:** ì •ìˆ˜(Int)ë¡œ ë¶„ì„(Parse) íŒŒì´í”„!

**Q3. ë””ë²„ê¹… í€´ì¦ˆ: ì•„ë˜ ì½”ë“œì—ì„œ ê°ì²´ ë°°ì—´ ê²€ì¦ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì›ì¸ì„ ì°¾ì•„ë´.**

```typescript
import { IsArray, ValidateNested } from 'class-validator';
class TaskDto { @IsString() title: string; }

class CreateProjectDto {
  @IsArray()
  @ValidateNested({ each: true })
  tasks: TaskDto[];
}
```
í…ŒìŠ¤íŠ¸ë¡œ `tasks: [{ title: 12345 }]` ë¼ê³  ìˆ«ìë¥¼ ë„£ì–´ì„œ ë³´ëƒˆëŠ”ë°, ì—ëŸ¬ê°€ ì•ˆ ë‚˜ê³  í†µê³¼í•´ë²„ë¦°ë‹¤?!

> âœ… **ì •ë‹µ:** `@Type(() => TaskDto)` ë°ì½”ë ˆì´í„°ë¥¼ ë¹¼ë¨¹ì—ˆê¸° ë•Œë¬¸!
> **ì„¤ëª…:** TypeScriptì˜ íƒ€ì… ì •ë³´ëŠ” ì»´íŒŒì¼ í›„ JSë¡œ ë³€í•˜ë©´ ê°ìª½ê°™ì´ ì‚¬ë¼ì ¸. ëŸ°íƒ€ì„ì— ë„ëŠ” íŒŒì´í”„ ì…ì¥ì—ì„  ì € `tasks` ë°°ì—´ ì•ˆì˜ ì›ì†Œê°€ `TaskDto` ê°ì²´ê°€ ë§ëŠ”ì§€ ì•Œ ê¸¸ì´ ì—†ì–´. ë¬´ì¡°ê±´ ëª…ì‹œì ìœ¼ë¡œ `@Type` ë°ì½”ë ˆì´í„°ë¥¼ ë‹¬ì•„ì¤˜ì•¼ ì¤‘ì²© ê²€ì¦ì´ ì‘ë™í•´!

---

## ğŸ”— ë” ì•Œì•„ë³´ê¸°
- [NestJS - ValidationPipe (ê³µì‹)](https://docs.nestjs.com/techniques/validation)
- [class-validator ì „ì²´ ê·œì¹™ ëª©ë¡](https://github.com/typestack/class-validator)
- [05. Drizzle ORM ì‹¬í™” ê°€ì´ë“œ](./05-database-drizzle.mdx)
